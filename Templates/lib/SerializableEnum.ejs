// MARK: SerializableEnum.ejs
extension <%- serializable.name %> : Serializable {
	public init(restoring source: BSON.Primitive) throws {
		guard let rawValue = String(source) else {
				throw Meow.Error.cannotDeserialize(type: <%- serializable.name %>.self, source: source, expectedPrimitive: String.self)
		}

		switch rawValue {
			<% serializable.cases.forEach(enumCase => {
				%> case "<%- enumCase.name %>": self = .<%- enumCase.name %>
			<%})%>
			default: throw Meow.Error.enumCaseNotFound(enum: "<%- serializable.name %>", name: rawValue)
		}
	}

	public func serialize() -> BSON.Primitive {
		switch self {
			<% serializable.cases.forEach(enumCase => { -%>
		case .<%- enumCase.name %>: return "<%- enumCase.name %>"
			<%})%>
		}
	}

	<%- include('VirtualInstanceEnum', {serializable}); %>
}
