<%
Object.assign(window, {
	serializableGenerators: [],
	modelGenerators: [],
    serializationGenerators: [],
    deserializationGenerators: [],

	imports: {
		"Foundation": true,
		"Meow": true,
		"ExtendedJSON": true
	},

	execute(closures, argument) {
		var code = "";
		closures.forEach(closure => {
	    	code += closure(argument) + "\n";
	  	});

		return code
	},

	importPluginDependencies() {
		var imports = "";

		for(var key in window.imports) {
		  if(window.imports.hasOwnProperty(key)) {
				imports += `import ${key}\n`;
			}
		}

		return imports;
	},

	forEachSerializable(func) {
		serializableGenerators.push(func);
	},
    forEachSerialization(func) {
        serializationGenerators.push(func);
    },
    forEachDeserialization(func) {
        deserializationGenerators.push(func);
    },

	swiftImport() {
		for (let i = 0; i < arguments.length; i++) {
			imports[arguments[i]] = true
		}
	}
});
%>
